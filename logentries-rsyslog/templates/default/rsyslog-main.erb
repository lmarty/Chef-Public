# Generated by Chef
$template LogentriesFormat,"<%= node['logentries']['token'] %> %HOSTNAME% %syslogtag%%msg%\n"

<%- if node['logentries']['enable_tls'] -%>
$DefaultNetstreamDriverCAFile /etc/syslog.logentries.crt
$ActionSendStreamDriver gtls
$ActionSendStreamDriverMode 1
$ActionSendStreamDriverAuthMode x509/name
<% end %>
$ActionResumeRetryCount <%= node['logentries']['resume_retry_count'] %>
$ActionQueueType LinkedList
$ActionQueueFileName /var/log/rsyslog_queue_main
$ActionQueueSaveOnShutdown on
$ActionQueueMaxDiskSpace <%= node['logentries']['queue_disk_space'] %>
<%= node['logentries']['syslog_selector'] %>     @@api.logentries.com:<%= @port %>;LogentriesFormat